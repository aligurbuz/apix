#!/usr/bin/env php
<?php
if(file_exists('./lib/bin/commands/'.$argv[1].'.php')){
    $commandFile=require("./lib/bin/commands/".$argv[1].".php");

    $commandFile=new $argv[1]();

    $list=[];
    foreach ($argv as $key=>$value){
        if($key>2){

            if(preg_match('@:@is',$value))
            {
                $value=explode(":",$value);
                $list[$value[0]]=$value[1];
            }
            else
            {
                $list[$value]=$value;
            }

        }
    }


    $method=$argv[2];
    echo $commandFile->$method($list);
    echo '
';
}
else{

    require_once './vendor/autoload.php';

    // Use default autoload implementation
    spl_autoload_register(function($class) {
        $class='./'.$class.'.php';
        $class=str_replace("\\","/",$class);
        require($class);

    });

    //get connection
    $consoleCommandApplication=new \lib\bin\custom();
    echo $consoleCommandApplication->execute($argv);
    echo '
';
}


